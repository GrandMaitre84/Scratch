<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <!-- Empêche le zoom sur iOS lors du focus input -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Scratch Mouse</title>

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#28a745">

  <!-- Favicon & PWA icon -->
  <link rel="icon" type="image/png" sizes="192x192" href="images/icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="images/icon-512.png">
  <link rel="shortcut icon" href="images/icon-192.png" type="image/png">

  <!-- Icônes iOS -->
  <link rel="apple-touch-icon" sizes="180x180" href="images/icon-180.png">
  <link rel="apple-touch-icon" sizes="167x167" href="images/icon-167.png">
  <link rel="apple-touch-icon" sizes="152x152" href="images/icon-152.png">
  <link rel="apple-touch-icon" sizes="120x120" href="images/icon-120.png">
  <meta name="apple-mobile-web-app-title" content="Scratch Mouse">

  <!-- Full-screen sur mobile -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <!-- conteneur d’intro Lottie -->
  <div id="lottie-intro"
       style="position:fixed; top:0; left:0; width:100vw; height:100vh;
              background:#FFD1DC; z-index:200;">
  </div>

  <!-- conteneur d’animation badge (caché par défaut) -->
  <div id="lottie-badge"
       style="display:none;
              position:fixed; top:0; left:0;
              width:100vw; height:100vh;
              z-index:300;
              justify-content:center;
              align-items:center;">
  </div>

  <div class="app">

    <!-- PROFIL -->
    <div id="view-profile" class="view active">
      <div class="profile-stats" style="display:none;">
        <div class="stat-card full-width" id="card-pseudo">
          <strong>Pseudo</strong>
          <p id="pseudo-display"></p>
        </div>
        <div class="stat-card" id="cards-scratched-card">
          <strong>Cards scratched</strong>
          <p id="cards-scratched">0</p>
        </div>
        <div class="stat-card" id="rewards-count-card">
          <strong>Rewards</strong>
          <p id="rewards-count">0</p>
        </div>
        <div class="stat-card" id="level-card">
          <strong>Level of love</strong>
          <p id="level-display">0</p>
        </div>
        <div class="stat-card full-width" id="xp-card">
          <strong>XP Progress</strong>
          <div class="progress-bar">
            <div class="progress-bar__fill" id="xp-bar"></div>
          </div>
          <p id="xp-text">0/100</p>
        </div>
      </div>
      <div id="profile-form" class="center-form">
        <input id="pseudo-input" type="text" placeholder="Entrez votre pseudo" />
        <button id="pseudo-btn">Valider</button>
      </div>
      <button id="reset-btn">Réinitialiser l’app</button>
    </div>

    <!-- PLAY -->
    <div id="view-play" class="view">
      <h2>SCRATCH</h2>
      <div id="scratch-area">
        <img id="scratch-image" src="images/card1.png" alt="Carte à gratter">
        <canvas id="scratchCanvas"></canvas>
      </div>
      <button id="reward-btn">REWARD</button>
    </div>

    <!-- REWARDS -->
    <div id="view-badges" class="view">
      <h2>MY REWARDS</h2>
      <ul id="badges-list"></ul>
    </div>

    <!-- JEU -->
    <div id="view-game" class="view">
      <h2>DOODLE JUMP</h2>
      <div style="width:100vw; height:calc(100vh - 140px); max-width:100vw;">
        <iframe
          id="doodlejump-frame"
          src="https://grandmaitre84.github.io/doodlejump/"
          width="100%"
          height="100%"
          style="border:none; min-height:100%; min-width:100%;"
          allowfullscreen
        ></iframe>
      </div>
    </div>

    <!-- onglets en bas -->
    <div class="tabs">
      <button id="tab-profile" class="tab active">PROFIL</button>
      <button id="tab-play"    class="tab">PLAY</button>
      <button id="tab-badges"  class="tab">REWARDS</button>
      <button id="tab-game"    class="tab">JEU</button>
    </div>

  </div>

  <!-- Lottie-web player -->
  <script src="https://unpkg.com/lottie-web@latest/build/player/lottie.min.js"></script>
  <!-- Votre logique JS -->
  <script src="script.js"></script>
</body>
</html>
