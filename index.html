<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <!-- Empêche le zoom sur iOS lors du focus input -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Scratch & Badges</title>

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#28a745">

  <!-- Full-screen sur mobile -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css"/>

  <!-- Icône iOS -->
  <link rel="apple-touch-icon" sizes="180x180" href="images/icon-180.png">
</head>
<body>
  <!-- conteneur d’intro Lottie -->
  <div id="lottie-intro"
       style="position:fixed; top:0; left:0; width:100vw; height:100vh;
              background:#FFD1DC; z-index:200;">
  </div>

  <div class="app">

    <!-- PROFIL -->
    <div id="view-profile" class="view active">
      <!-- header caché par défaut -->
      <div id="profile-header" style="display: none;">
        <p id="pseudo-display" class="profile-line"></p>
        <p id="level-display" class="profile-line">Level of love : 0</p>
        <div id="xp-container">
          <div id="xp-bar"></div>
        </div>
        <p id="xp-text">XP : 0/100</p>
      </div>

      <!-- Formulaire de saisie du pseudo -->
      <div id="profile-form">
        <input id="pseudo-input" type="text" placeholder="Entrez votre pseudo" />
        <button id="pseudo-btn">Valider</button>
      </div>

      <!-- Bouton reset en bas pour tests -->
      <button id="reset-btn">Réinitialiser l’app</button>
    </div>

    <!-- PLAY -->
    <div id="view-play" class="view">
      <h2>SCRATCH</h2>
      <div id="scratch-area">
        <img id="scratch-image" src="images/card1.png" alt="Carte à gratter">
        <canvas id="scratchCanvas"></canvas>
      </div>
      <button id="reward-btn">REWARD</button>
    </div>

    <!-- REWARDS -->
    <div id="view-badges" class="view">
      <h2>MY REWARDS</h2>
      <ul id="badges-list"></ul>
    </div>

    <!-- onglets en bas -->
    <div class="tabs">
      <button id="tab-profile" class="tab active">PROFIL</button>
      <button id="tab-play"    class="tab">PLAY</button>
      <button id="tab-badges"  class="tab">REWARDS</button>
    </div>

  </div>

  <!-- Lottie-web player -->
  <script src="https://unpkg.com/lottie-web@latest/build/player/lottie.min.js"></script>
  <!-- Votre logique JS -->
  <script src="script.js"></script>
</body>
</html>
